<template name="CreateDiscussion">

	<section class="create-channel">
		<div class="create-channel__wrapper">
			<p class="create-channel__description">{{_ "Discussion_description"}}</p>
			<form id="create-discussion" class="create-channel__content">
				{{#if false}}
					{{#unless disabled}}
						{{> SearchCreateDiscussion
								onClickTag=onClickTagRoom
								deleteLastItem=deleteLastItemRoom
								list=selectedRoom
								onSelect=onSelectRoom
								collection=roomCollection
								field='name'
								sort='name'
								label="Discussion_target_channel"
								placeholder="Discussion_target_channel_description"
								name="parentChannel"
								disabled=disabled
								selector=roomSelector
								description=targetChannelText
								noMatchTemplate="roomSearchEmpty"
								templateItem="popupList_item_channel"
								modifier=roomModifier
						}} {{else}}
						<div class="rc-input" disabled>
							<label class="rc-input__label">
								<div class="rc-input__title">{{_ "Discussion_target_channel"}}</div>
								<div class="rc-input__wrapper">
									<input disabled name="parentChannel" id="parentChannel" value={{parentChannel}}
										   class="rc-input__element"/>
								</div>
							</label>
						</div>
					{{/unless}}
				{{/if}}
				<div class="create-channel__inputs">
					{{#if isSlide0}}
						<div class="rc-input">
							<label class="rc-input__label">
								<div class="rc-input__title">{{_ "Discussion_name"}}</div>
								<div class="rc-input__wrapper">
									<div class="rc-input__icon">
										{{> icon block="rc-input__icon-svg" icon="discussion"}}
									</div>
									<input name="discussion_name" id="discussion_name" class="rc-input__element"
										   placeholder="{{_ 'New_discussion_name'}}"
										   maxlength="{{maxMessageLength}}" value="{{channelName}}"/>
								</div>
							</label>
						</div>
					{{/if}}
					{{#if isSlide1}}
						{{> SetTag
								name='Coltura'
								inputName='coltura'
								tags=tags.coltura
								selectedTags=selectedTags.coltura
						}}
					{{/if}}
					{{#if isSlide2}}
						{{> SetTag
								name='Tipo'
								inputName='tipo'
								tags=tags.tipo
								selectedTags=selectedTags.tipo
						}}
					{{/if}}
					{{#if isSlide3}}
						{{> SetTag
								name='Genere'
								inputName='genere'
								tags=tags.genere
								selectedTags=selectedTags.genere
						}}
					{{/if}}
					{{#if isSlide4}}
						{{> SetTag
								name='Motivo'
								inputName='motivo'
								tags=tags.motivo
								selectedTags=selectedTags.motivo
						}}
					{{/if}}
					{{#if false}}
						{{> SearchCreateDiscussion
								onClickTag=onClickTagUser
								deleteLastItem=deleteLastItemUser
								list=selectedUsers
								onSelect=onSelectUser
								collection='UserAndRoom'
								subscription='userAutocomplete'
								field='username'
								sort='username'
								label="Invite_Users"
								placeholder="Username_Placeholder"
								name="users"
								icon="at"
								noMatchTemplate="userSearchEmpty"
								templateItem="popupList_item_default"
								modifier=userModifier
						}}
					{{/if}}
					{{#if isLastSlide}}
						<div class="rc-input">
							<label class="rc-input__label">
								<div class="rc-input__title">{{_ "Discussion_first_message_title"}}</div>
								<div class="rc-input__wrapper">
								<textarea rows="5" name="discussion_message" id="discussion_message"
										  class="rc-input__element" placeholder="{{_ 'New_discussion_first_message'}}"
										  maxlength="{{maxMessageLength}}"></textarea>
								</div>
							</label>
						</div>
					{{/if}}
				</div>
			</form>
			<div class="rc-input rc-space-between">
				<button id="prev"
						class="rc-button rc-button--primary {{prevIsDisabled}}" {{prevIsDisabled}}>{{_
						"Thread_modal_prev"}}</button>
				{{#if isLastSlide}}
					<button form="create-discussion"
							class="rc-button rc-button--primary js-save-discussion {{createIsDisabled}}" {{createIsDisabled}}>{{_
							"Create"}}</button>
				{{else}}
					<button id="next"
							class="rc-button rc-button--primary {{nextIsDisabled}}" {{nextIsDisabled}}>{{_
							"Thread_modal_next"}}</button>
				{{/if}}
			</div>
		</div>
	</section>
</template>

<template name="SetTag">
	<div class="rc-input">
		<div class="rc-input__title">{{name}}</div>
		{{#each tags}}
			<div class="rc-input-radio__container">
				<input
						checked="{{$eq ../selectedTags this}}"
						class="rc-input__radio"
						type="radio"
						name="{{../inputName}}"
						value="{{this}}"/> {{this}}
			</div>
		{{/each}}
	</div>
</template>

<template name="SearchCreateDiscussion">
	<div class="rc-input" id='search-{{name}}' {{disabled}}>
		<label class="rc-input__label">
			<div class="rc-input__title">{{_ label}}</div>
			<div class="rc-input__wrapper">
				{{# if icon}}
					<div class="rc-input__icon">
						{{> icon block="rc-input__icon-svg" icon=icon}}
					</div>
				{{/if}}
				<div class="rc-tags{{# unless icon}} rc-tags--no-icon{{/unless}}">
					{{#each item in list}} {{> tag item}} {{/each}}
					<input type="text" id="{{name}}" class="rc-tags__input" placeholder="{{_ placeholder}}"
						   name="{{name}}" autocomplete="off" {{disabled}} />
				</div>
			</div>
			{{#with config}} {{#if autocomplete 'isShowing'}}
				<div class="dropdown-in">
					{{#if autocomplete 'isLoaded'}}
						{{> popupList data=config items=items}}
					{{/if}}
				</div>
			{{/if}} {{/with}}
		</label>
		<div class="rc-input__description">{{ description }}</div>
	</div>
</template>
